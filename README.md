# Vim-OneShot-AHK 🚀

**Vim-OneShot-AHK** 是一款专为 CS/ECE 学生及开发者设计的全局效率工具。基于 AutoHotkey v2.0 构建，它将 Vim 的核心操作逻辑引入 Windows 全局环境，并提出了 **“一击脱离”（One-shot）** 的编辑哲学。

> **💡 核心哲学：** 模式切换不应成为负担。进入模式是为了完成特定的原子任务（选中、复制、删除），任务一旦触发，脚本立即自动回归编辑模式。

---

## ✨ 核心特性 (v2.0 Updated)

* **⚡ 进场即选中 (Default Visual Mode)**：单击 `CapsLock` 默认进入 **Visual 模式**，配合 `IJKL` 实现瞬时代码抓取。
* **🖱️ 原生光标沉浸体验**：
* **Visual 模式**：光标变为 **十字准星 (✚)**，暗示精确框选。
* **Normal 模式**：光标变为 **四向箭头 (✥)**，暗示快速移动。
* *拒绝遮挡视线的气泡提示，回归 Windows 原生手感。*


* **🎯 一击脱离 (One-shot Action)**：所有的操作（复制 `c`、删除 `d`）执行后，脚本会自动释放逻辑状态并回归 Insert 模式，无需手动按 Esc。
* **🤖 Typeout 模拟输入**：在 Normal 模式下按 `t`，可将剪贴板内容以“人手敲击”的方式逐字输入，完美绕过 SSH 终端/VNC/虚拟机的**禁止粘贴**限制。
* **🚀 Smart TabOut**：在编辑模式下，当光标位于 `)` `]` `}` `"` `'` 等闭合符号内时，按 `Tab` 键自动跳出符号（类似 VS Code TabOut 插件），且支持全局应用。
* **📦 便携化设计**：图标资源自动打包进 EXE，单文件随身携带，无需担心资源丢失。

---

## ⌨️ 快捷键指南

### 1. 模式切换与状态

| 按键 | 模式 | 光标状态 | 说明 |
| --- | --- | --- | --- |
| `CapsLock` | **Visual (默认)** | **✚ 十字准星** | 移动时自动按住 Shift (选中) |
| `v` | Visual / Normal | **✥ 四向箭头** | 在“选中”与“纯移动”模式间切换 |
| `Esc` | Edit | **↖ 标准箭头** | 强制退出导航，回到编辑模式 |

### 2. 基础位移 (HJKL ++)

| 按键 | 功能 | 说明 |
| --- | --- | --- |
| `i / k / j / l` | 上 / 下 / 左 / 右 | 根据当前模式决定是否带选中 |
| `u / o` | Home / End | 快速跳转行首/行尾 |
| `h` | **High-Impact Select** | 模拟 `Shift+Home` x2 + `End`，**全选当前整行** |
| `Ctrl + i/k` | 垂直大跳 | 跨越 5 行移动 |
| `Ctrl + j/l` | 水平大跳 | 按单词 (Word) 移动 |

### 3. 操作符连招 (Operator Pending)

当进入模式后**未产生位移**时，按下 `d` (删除) 或 `c` (复制) 会进入等待状态（光标保持不变），此时可接以下指令：

| 指令 (d=Delete, c=Copy) | 动作描述 | 典型场景 |
| --- | --- | --- |
| `dh` / `ch` | **House (Whole Line)** | 删除/复制 **整行** (自动闭合空隙) |
| `dw` / `cw` | **Word (Right)** | 删除/复制 **右侧单词** |
| `db` / `cb` | **Back (Left)** | 删除/复制 **左侧单词** |

> **注**：如果已经产生了移动（HasMoved），按 `d` 为删除选中内容，按 `c` 为复制选中内容。

### 4. 辅助功能 (Utility)

* **`t` (Typeout)**：(Normal模式下) 将剪贴板内容模拟键盘敲入。
* **`Tab` (TabOut)**：(编辑模式下) 如果光标右侧是 `)]}">;,` 等符号，直接跳过；否则输入制表符。
* **`CapsLock + IJKL`**：任何时候均可作为标准方向键使用。

---

## 🚀 安装与编译

### 方式 A：直接运行 (开发模式)

1. 确保安装 [AutoHotkey v2.0+](https://www.autohotkey.com/)。
2. 确保 `icon/assets/` 目录下包含 `arrows.ico`, `selection.ico`, `pencil.ico`。
3. 运行 `Global_VIM.ahk`。

### 方式 B：编译为 EXE (推荐)

1. 打开 **Ahk2Exe** 编译器。
2. **Base File** 选择：`v2.0.xx U64 AutoHotkey64.exe`。
3. **Compress exe**: 选择 `(none)` (防止杀毒误报)。
4. 点击 **Convert**。
5. 生成的 `.exe` 已内置图标，可复制到任何 Windows 电脑直接使用。

---

## ⚠️ 常见问题

* **Q: 为什么按 `c` 没反应？**
* A: 如果没选中东西，`c` 处于等待指令状态（等待 `h/w/b`）。如果你想强制复制当前行，请用 `ch`。


* **Q: 为什么图标显示为 H？**
* A: 请确保编译时项目目录下存在 `icon/assets` 文件夹，脚本会自动打包资源。


* **Q: 在某些游戏或管理员软件中失效？**
* A: 请尝试以“管理员身份”运行脚本/EXE。



---

## 📄 许可证

[MIT License](https://www.google.com/search?q=LICENSE)